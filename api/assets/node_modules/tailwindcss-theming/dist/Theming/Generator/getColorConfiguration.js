"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ColorVariant_1 = require("../Variant/ColorVariant");
const OpacityVariant_1 = require("../Variant/OpacityVariant");
const utils_1 = require("./utils");
function getColorConfiguration(themes, config) {
    const colorConfiguration = {};
    const theme = utils_1.getDefaultTheme(themes);
    theme.getColors().forEach(color => {
        colorConfiguration[color.keyName] = colorConfiguration[color.keyName] || {};
        let variants = theme.variantsOf(color.keyName);
        // we add the value in the default key
        colorConfiguration[color.keyName]['default'] = utils_1.getColorCssConfiguration(color, config);
        // variants, we add a key and variant subkeys
        if (variants.length > 0) {
            variants.forEach(variant => {
                if (variant instanceof ColorVariant_1.ColorVariant) {
                    colorConfiguration[color.keyName][variant.name] = utils_1.getColorVariantCssConfiguration(variant, config);
                }
                else if (variant instanceof OpacityVariant_1.OpacityVariant) {
                    if (!config.hexadecimal) {
                        colorConfiguration[color.keyName][variant.name] = utils_1.getOpacityVariantCssConfiguration(color, variant, config);
                    }
                }
                else {
                    throw new Error('Unknown color variant.');
                }
            });
        }
    });
    return colorConfiguration;
}
exports.getColorConfiguration = getColorConfiguration;
